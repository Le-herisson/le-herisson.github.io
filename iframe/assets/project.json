{"targets":[{"isStage":true,"name":"Stage","variables":{},"lists":{},"broadcasts":{},"blocks":{},"comments":{"aK":{"blockId":null,"x":50,"y":50,"width":350,"height":170,"minimized":false,"text":"Configuration for https://turbowarp.org/\nYou can move, resize, and minimize this comment, but don't edit it by hand. This comment can be deleted to remove the stored settings.\n{\"width\":294,\"height\":361} // _twconfig_"}},"currentCostume":0,"costumes":[{"name":"arrière-plan1","bitmapResolution":1,"dataFormat":"svg","assetId":"e369a653af949f9e6c96dcfe235ce051","md5ext":"e369a653af949f9e6c96dcfe235ce051.svg","rotationCenterX":-608.1177600000001,"rotationCenterY":359.07023851407865}],"sounds":[],"volume":100,"layerOrder":0,"tempo":60,"videoTransparency":50,"videoState":"on","textToSpeechLanguage":null},{"isStage":false,"name":"Sprite1","variables":{},"lists":{},"broadcasts":{},"blocks":{"/":{"opcode":"event_whenflagclicked","next":"F","parent":null,"inputs":{},"fields":{},"topLevel":true},"F":{"opcode":"localstorage_setProjectId","next":"d","parent":"/","inputs":{"ID":[1,[10,"fr.le-herisson.iframe"]]},"fields":{}},"d":{"opcode":"control_if_else","next":null,"parent":"F","inputs":{"CONDITION":[2,"G"],"SUBSTACK":[2,"H"],"SUBSTACK2":[2,"I"]},"fields":{}},"G":{"opcode":"operator_equals","next":null,"parent":"d","inputs":{"OPERAND1":[3,":",[10,""]],"OPERAND2":[1,[10,""]]},"fields":{}},":":{"opcode":"localstorage_get","next":null,"parent":"G","inputs":{"KEY":[1,[10,"title"]]},"fields":{}},"H":{"opcode":"looks_show","next":"J","parent":"d","inputs":{},"fields":{}},"J":{"opcode":"runtimeoptions_setDimensions","next":"K","parent":"H","inputs":{"width":[1,[4,"294"]],"height":[1,[4,"361"]]},"fields":{}},"K":{"opcode":"cubesterWindowControls_resizeTo","next":"m","parent":"J","inputs":{"W":[1,[4,"294"]],"H":[1,[4,"361"]]},"fields":{}},"m":{"opcode":"cubesterWindowControls_moveToPresets","next":"L","parent":"K","inputs":{"PRESETS":[1,";"]},"fields":{}},";":{"opcode":"cubesterWindowControls_menu_MOVE","next":null,"parent":"m","inputs":{},"fields":{"MOVE":["center",null]},"shadow":true},"L":{"opcode":"iframePlus_removeAllIframes","next":"M","parent":"m","inputs":{},"fields":{}},"M":{"opcode":"htmlInputs_removeAllInputs","next":"N","parent":"L","inputs":{},"fields":{}},"N":{"opcode":"htmlInputs_createInput","next":"O","parent":"M","inputs":{"ID":[1,[10,"title"]],"X":[1,[4,"0"]],"Y":[1,[4,"40"]]},"fields":{}},"O":{"opcode":"htmlInputs_createMultilineInput","next":"P","parent":"N","inputs":{"ID":[1,[10,"content"]],"X":[1,[4,"0"]],"Y":[1,[4,"-20"]]},"fields":{}},"P":{"opcode":"htmlInputs_resizeInput","next":"Q","parent":"O","inputs":{"ID":[1,[10,"title"]],"WIDTH":[1,[4,"150"]],"HEIGHT":[1,[4,"20"]]},"fields":{}},"Q":{"opcode":"htmlInputs_resizeInput","next":"e","parent":"P","inputs":{"ID":[1,[10,"content"]],"WIDTH":[1,[4,"150"]],"HEIGHT":[1,[4,"50"]]},"fields":{}},"e":{"opcode":"control_repeat_until","next":"R","parent":"Q","inputs":{"CONDITION":[2,"S"],"SUBSTACK":[2,"f"]},"fields":{}},"S":{"opcode":"operator_equals","next":null,"parent":"e","inputs":{"OPERAND1":[3,"=",[10,""]],"OPERAND2":[1,[10,"none"]]},"fields":{}},"=":{"opcode":"MouseCursor_getCur","next":null,"parent":"S","inputs":{},"fields":{}},"f":{"opcode":"control_if_else","next":null,"parent":"e","inputs":{"CONDITION":[2,"T"],"SUBSTACK":[2,"n"],"SUBSTACK2":[2,"g"]},"fields":{}},"T":{"opcode":"procedures_call","next":null,"parent":"f","inputs":{"q;P*ycujaps7V`!m;M#+":[1,[10,"42"]],"H49qY$S#LSwh9^J/]Nil":[1,[10,"-60"]],"uk7M6yH9_}TrT4mFU;,E":[1,[10,"-42"]],"V=V[cMd,]wxuW2e5DUvc":[1,[10,"-82"]],"R%:AuyL_?M;t|Z8]GYiC":[2,"?"]},"fields":{},"mutation":{"tagName":"mutation","children":[],"proccode":"Touched in the zone : → %s ↑ %s ← %s ↓ %s ? and mouse click ? %b","argumentids":"[\"q;P*ycujaps7V`!m;M#+\",\"H49qY$S#LSwh9^J/]Nil\",\"uk7M6yH9_}TrT4mFU;,E\",\"V=V[cMd,]wxuW2e5DUvc\",\"R%:AuyL_?M;t|Z8]GYiC\"]","warp":"false","return":"2"}},"?":{"opcode":"operator_or","next":null,"parent":"T","inputs":{},"fields":{}},"n":{"opcode":"MouseCursor_setCur","next":"o","parent":"f","inputs":{"cur":[1,"@"]},"fields":{}},"@":{"opcode":"MouseCursor_menu_cursors","next":null,"parent":"n","inputs":{},"fields":{"cursors":["pointer",null]},"shadow":true},"o":{"opcode":"control_if","next":null,"parent":"n","inputs":{"CONDITION":[2,"U"],"SUBSTACK":[2,"["]},"fields":{}},"U":{"opcode":"tw_getButtonIsDown","next":null,"parent":"o","inputs":{"MOUSE_BUTTON":[1,"]"]},"fields":{}},"]":{"opcode":"tw_menu_mouseButton","next":null,"parent":"U","inputs":{},"fields":{"mouseButton":["0",null]},"shadow":true},"[":{"opcode":"MouseCursor_hideCur","next":null,"parent":"o","inputs":{},"fields":{}},"g":{"opcode":"control_if_else","next":null,"parent":"f","inputs":{"CONDITION":[2,"p"],"SUBSTACK":[2,"V"],"SUBSTACK2":[2,"q"]},"fields":{}},"p":{"opcode":"operator_or","next":null,"parent":"g","inputs":{"OPERAND1":[2,"W"],"OPERAND2":[2,"X"]},"fields":{}},"W":{"opcode":"procedures_call","next":null,"parent":"p","inputs":{"q;P*ycujaps7V`!m;M#+":[1,[10,"77"]],"H49qY$S#LSwh9^J/]Nil":[1,[10,"94"]],"uk7M6yH9_}TrT4mFU;,E":[1,[10,"59"]],"V=V[cMd,]wxuW2e5DUvc":[1,[10,"77"]],"R%:AuyL_?M;t|Z8]GYiC":[2,"^"]},"fields":{},"mutation":{"tagName":"mutation","children":[],"proccode":"Touched in the zone : → %s ↑ %s ← %s ↓ %s ? and mouse click ? %b","argumentids":"[\"q;P*ycujaps7V`!m;M#+\",\"H49qY$S#LSwh9^J/]Nil\",\"uk7M6yH9_}TrT4mFU;,E\",\"V=V[cMd,]wxuW2e5DUvc\",\"R%:AuyL_?M;t|Z8]GYiC\"]","warp":"false","return":"2"}},"^":{"opcode":"operator_not","next":null,"parent":"W","inputs":{},"fields":{}},"X":{"opcode":"sensing_keypressed","next":null,"parent":"p","inputs":{"KEY_OPTION":[1,"_"]},"fields":{}},"_":{"opcode":"sensing_keyoptions","next":null,"parent":"X","inputs":{},"fields":{"KEY_OPTION":["escape",null]},"shadow":true},"V":{"opcode":"MouseCursor_hideCur","next":"`","parent":"g","inputs":{},"fields":{}},"`":{"opcode":"control_stop","next":null,"parent":"V","inputs":{},"fields":{"STOP_OPTION":["all",null]},"mutation":{"tagName":"mutation","children":[],"hasnext":"false"}},"q":{"opcode":"looks_switchcostumeto","next":"h","parent":"g","inputs":{"COSTUME":[1,"{"]},"fields":{}},"{":{"opcode":"looks_costume","next":null,"parent":"q","inputs":{},"fields":{"COSTUME":["cd31645100e4443fbfb6ff318b06e7610OKSa4cxroj8RDHA-4",null]},"shadow":true},"h":{"opcode":"MouseCursor_setCursorImage","next":"Y","parent":"q","inputs":{"position":[1,"|"],"size":[1,"}"]},"fields":{}},"|":{"opcode":"MouseCursor_menu_imagePositions","next":null,"parent":"h","inputs":{},"fields":{"imagePositions":["0,0",null]},"shadow":true},"}":{"opcode":"MouseCursor_menu_imageSizes","next":null,"parent":"h","inputs":{},"fields":{"imageSizes":["32x32",null]},"shadow":true},"Y":{"opcode":"looks_switchcostumeto","next":null,"parent":"h","inputs":{"COSTUME":[1,"~"]},"fields":{}},"~":{"opcode":"looks_costume","next":null,"parent":"Y","inputs":{},"fields":{"COSTUME":["Window - Medium",null]},"shadow":true},"R":{"opcode":"looks_hide","next":"r","parent":"e","inputs":{},"fields":{}},"r":{"opcode":"looks_switchcostumeto","next":"i","parent":"R","inputs":{"COSTUME":[1,"aa"]},"fields":{}},"aa":{"opcode":"looks_costume","next":null,"parent":"r","inputs":{},"fields":{"COSTUME":["cd31645100e4443fbfb6ff318b06e7610OKSa4cxroj8RDHA-4",null]},"shadow":true},"i":{"opcode":"MouseCursor_setCursorImage","next":"s","parent":"r","inputs":{"position":[1,"ab"],"size":[1,"ac"]},"fields":{}},"ab":{"opcode":"MouseCursor_menu_imagePositions","next":null,"parent":"i","inputs":{},"fields":{"imagePositions":["0,0",null]},"shadow":true},"ac":{"opcode":"MouseCursor_menu_imageSizes","next":null,"parent":"i","inputs":{},"fields":{"imageSizes":["32x32",null]},"shadow":true},"s":{"opcode":"looks_switchcostumeto","next":"t","parent":"i","inputs":{"COSTUME":[1,"ad"]},"fields":{}},"ad":{"opcode":"looks_costume","next":null,"parent":"s","inputs":{},"fields":{"COSTUME":["Window - Medium",null]},"shadow":true},"t":{"opcode":"localstorage_set","next":"u","parent":"s","inputs":{"KEY":[1,[10,"title"]],"VALUE":[3,"ae",[10,""]]},"fields":{}},"ae":{"opcode":"htmlInputs_getInputValue","next":null,"parent":"t","inputs":{"ID":[1,[10,"title"]]},"fields":{}},"u":{"opcode":"localstorage_set","next":"Z","parent":"t","inputs":{"KEY":[1,[10,"content"]],"VALUE":[3,"af",[10,""]]},"fields":{}},"af":{"opcode":"htmlInputs_getInputValue","next":null,"parent":"u","inputs":{"ID":[1,[10,"content"]]},"fields":{}},"Z":{"opcode":"htmlInputs_removeAllInputs","next":"b","parent":"u","inputs":{},"fields":{}},"b":{"opcode":"truefantomnetwork_open_window_block","next":null,"parent":"Z","inputs":{"USER_URL":[1,[10,"./index.html"]],"WIDTH":[1,"ag"],"HEIGHT":[1,"ah"],"LEFT":[1,"ai"],"TOP":[1,"aj"]},"fields":{}},"ag":{"opcode":"truefantomnetwork_menu_default","next":null,"parent":"b","inputs":{},"fields":{"default":["default",null]},"shadow":true},"ah":{"opcode":"truefantomnetwork_menu_default","next":null,"parent":"b","inputs":{},"fields":{"default":["default",null]},"shadow":true},"ai":{"opcode":"truefantomnetwork_menu_default","next":null,"parent":"b","inputs":{},"fields":{"default":["default",null]},"shadow":true},"aj":{"opcode":"truefantomnetwork_menu_default","next":null,"parent":"b","inputs":{},"fields":{"default":["default",null]},"shadow":true},"I":{"opcode":"runtimeoptions_setDimensions","next":"!","parent":"d","inputs":{"width":[1,[4,"1280"]],"height":[1,[4,"720"]]},"fields":{}},"!":{"opcode":"cubesterWindowControls_matchStageSize","next":"v","parent":"I","inputs":{},"fields":{}},"v":{"opcode":"cubesterWindowControls_moveToPresets","next":"#","parent":"!","inputs":{"PRESETS":[1,"ak"]},"fields":{}},"ak":{"opcode":"cubesterWindowControls_menu_MOVE","next":null,"parent":"v","inputs":{},"fields":{"MOVE":["center",null]},"shadow":true},"#":{"opcode":"control_wait","next":"j","parent":"v","inputs":{"DURATION":[1,[5,"0.2"]]},"fields":{}},"j":{"opcode":"iframePlus_showHtmlContent","next":"%","parent":"#","inputs":{"HTML":[3,"al",[10,""]],"ID":[3,"am",[10,""]]},"fields":{}},"al":{"opcode":"localstorage_get","next":null,"parent":"j","inputs":{"KEY":[1,[10,"content"]]},"fields":{}},"am":{"opcode":"localstorage_get","next":null,"parent":"j","inputs":{"KEY":[1,[10,"title"]]},"fields":{}},"%":{"opcode":"control_wait","next":"c","parent":"j","inputs":{"DURATION":[1,[5,"0.2"]]},"fields":{}},"c":{"opcode":"iframePlus_resize","next":"w","parent":"%","inputs":{"ID":[3,"an",[10,""]],"WIDTH":[3,"ao",[4,""]],"HEIGHT":[3,"(",[4,""]]},"fields":{}},"an":{"opcode":"localstorage_get","next":null,"parent":"c","inputs":{"KEY":[1,[10,"title"]]},"fields":{}},"ao":{"opcode":"cubesterWindowControls_windowW","next":null,"parent":"c","inputs":{},"fields":{}},"(":{"opcode":"operator_subtract","next":null,"parent":"c","inputs":{"NUM1":[3,"ap",[4,""]],"NUM2":[1,[4,"10"]]},"fields":{}},"ap":{"opcode":"cubesterWindowControls_windowH","next":null,"parent":"(","inputs":{},"fields":{}},"w":{"opcode":"iframePlus_move","next":"x","parent":"c","inputs":{"ID":[3,"aq",[10,""]],"X":[1,[4,"0"]],"Y":[1,[4,"0"]]},"fields":{}},"aq":{"opcode":"localstorage_get","next":null,"parent":"w","inputs":{"KEY":[1,[10,"title"]]},"fields":{}},"x":{"opcode":"control_wait_until","next":"ar","parent":"w","inputs":{"CONDITION":[2,")"]},"fields":{}},")":{"opcode":"sensing_keypressed","next":null,"parent":"x","inputs":{"KEY_OPTION":[1,"as"]},"fields":{}},"as":{"opcode":"sensing_keyoptions","next":null,"parent":")","inputs":{},"fields":{"KEY_OPTION":["escape",null]},"shadow":true},"ar":{"opcode":"localstorage_removeAll","next":null,"parent":"x","inputs":{},"fields":{}},"*":{"opcode":"procedures_definition","next":"k","parent":null,"inputs":{"custom_block":[1,"a"]},"fields":{},"topLevel":true},"a":{"opcode":"procedures_prototype","next":null,"parent":"*","inputs":{"q;P*ycujaps7V`!m;M#+":[1,"at"],"H49qY$S#LSwh9^J/]Nil":[1,"au"],"uk7M6yH9_}TrT4mFU;,E":[1,"av"],"V=V[cMd,]wxuW2e5DUvc":[1,"aw"],"R%:AuyL_?M;t|Z8]GYiC":[1,"ax"]},"fields":{},"shadow":true,"mutation":{"tagName":"mutation","children":[],"proccode":"Touched in the zone : → %s ↑ %s ← %s ↓ %s ? and mouse click ? %b","argumentids":"[\"q;P*ycujaps7V`!m;M#+\",\"H49qY$S#LSwh9^J/]Nil\",\"uk7M6yH9_}TrT4mFU;,E\",\"V=V[cMd,]wxuW2e5DUvc\",\"R%:AuyL_?M;t|Z8]GYiC\"]","argumentnames":"[\"→\",\"↑\",\"←\",\"↓\",\"option\"]","argumentdefaults":"[\"\",\"\",\"\",\"\",\"false\"]","warp":"false"}},"at":{"opcode":"argument_reporter_string_number","next":null,"parent":"a","inputs":{},"fields":{"VALUE":["→",null]},"shadow":true},"au":{"opcode":"argument_reporter_string_number","next":null,"parent":"a","inputs":{},"fields":{"VALUE":["↑",null]},"shadow":true},"av":{"opcode":"argument_reporter_string_number","next":null,"parent":"a","inputs":{},"fields":{"VALUE":["←",null]},"shadow":true},"aw":{"opcode":"argument_reporter_string_number","next":null,"parent":"a","inputs":{},"fields":{"VALUE":["↓",null]},"shadow":true},"ax":{"opcode":"argument_reporter_boolean","next":null,"parent":"a","inputs":{},"fields":{"VALUE":["option",null]},"shadow":true},"k":{"opcode":"control_if_else","next":null,"parent":"*","inputs":{"CONDITION":[2,"y"],"SUBSTACK":[2,"l"],"SUBSTACK2":[2,"+"]},"fields":{}},"y":{"opcode":"operator_and","next":null,"parent":"k","inputs":{"OPERAND1":[2,"z"],"OPERAND2":[2,"A"]},"fields":{}},"z":{"opcode":"operator_and","next":null,"parent":"y","inputs":{"OPERAND1":[2,"B"],"OPERAND2":[2,"C"]},"fields":{}},"B":{"opcode":"operator_lt","next":null,"parent":"z","inputs":{"OPERAND1":[3,"ay",[10,""]],"OPERAND2":[3,"az",[10,""]]},"fields":{}},"ay":{"opcode":"sensing_mousex","next":null,"parent":"B","inputs":{},"fields":{}},"az":{"opcode":"argument_reporter_string_number","next":null,"parent":"B","inputs":{},"fields":{"VALUE":["→",null]}},"C":{"opcode":"operator_lt","next":null,"parent":"z","inputs":{"OPERAND1":[3,"aA",[10,""]],"OPERAND2":[3,"aB",[10,""]]},"fields":{}},"aA":{"opcode":"sensing_mousey","next":null,"parent":"C","inputs":{},"fields":{}},"aB":{"opcode":"argument_reporter_string_number","next":null,"parent":"C","inputs":{},"fields":{"VALUE":["↑",null]}},"A":{"opcode":"operator_and","next":null,"parent":"y","inputs":{"OPERAND1":[2,"D"],"OPERAND2":[2,"E"]},"fields":{}},"D":{"opcode":"operator_gt","next":null,"parent":"A","inputs":{"OPERAND1":[3,"aC",[10,""]],"OPERAND2":[3,"aD",[10,""]]},"fields":{}},"aC":{"opcode":"sensing_mousex","next":null,"parent":"D","inputs":{},"fields":{}},"aD":{"opcode":"argument_reporter_string_number","next":null,"parent":"D","inputs":{},"fields":{"VALUE":["←",null]}},"E":{"opcode":"operator_gt","next":null,"parent":"A","inputs":{"OPERAND1":[3,"aE",[10,""]],"OPERAND2":[3,"aF",[10,""]]},"fields":{}},"aE":{"opcode":"sensing_mousey","next":null,"parent":"E","inputs":{},"fields":{}},"aF":{"opcode":"argument_reporter_string_number","next":null,"parent":"E","inputs":{},"fields":{"VALUE":["↓",null]}},"l":{"opcode":"control_if_else","next":null,"parent":"k","inputs":{"CONDITION":[2,"aG"],"SUBSTACK":[2,","],"SUBSTACK2":[2,"-"]},"fields":{}},"aG":{"opcode":"argument_reporter_boolean","next":null,"parent":"l","inputs":{},"fields":{"VALUE":["option",null]}},",":{"opcode":"procedures_return","next":null,"parent":"l","inputs":{"VALUE":[3,".",[10,""]]},"fields":{}},".":{"opcode":"tw_getButtonIsDown","next":null,"parent":",","inputs":{"MOUSE_BUTTON":[1,"aH"]},"fields":{}},"aH":{"opcode":"tw_menu_mouseButton","next":null,"parent":".","inputs":{},"fields":{"mouseButton":["0",null]},"shadow":true},"-":{"opcode":"procedures_return","next":null,"parent":"l","inputs":{"VALUE":[3,"aI",[10,""]]},"fields":{}},"aI":{"opcode":"operator_not","next":null,"parent":"-","inputs":{},"fields":{}},"+":{"opcode":"procedures_return","next":null,"parent":"k","inputs":{"VALUE":[3,"aJ",[10,""]]},"fields":{}},"aJ":{"opcode":"operator_or","next":null,"parent":"+","inputs":{},"fields":{}}},"comments":{},"currentCostume":1,"costumes":[{"name":"Window - Medium","bitmapResolution":1,"dataFormat":"svg","assetId":"5453c01d5926e74c8a1cfb83233279a8","md5ext":"5453c01d5926e74c8a1cfb83233279a8.svg","rotationCenterX":146.57063814279996,"rotationCenterY":180.00000000000003},{"name":"cd31645100e4443fbfb6ff318b06e7610OKSa4cxroj8RDHA-4","bitmapResolution":1,"dataFormat":"svg","assetId":"3224048fdec3da092f4d16ba67ffa1eb","md5ext":"3224048fdec3da092f4d16ba67ffa1eb.svg","rotationCenterX":16,"rotationCenterY":16}],"sounds":[],"volume":100,"layerOrder":1,"visible":false,"x":0,"y":0,"size":55.00000000000001,"direction":90,"draggable":false,"rotationStyle":"all around"}],"monitors":[],"extensions":["localstorage","runtimeoptions","cubesterWindowControls","iframePlus","htmlInputs","MouseCursor","tw","truefantomnetwork"],"extensionURLs":{"localstorage":"https://extensions.turbowarp.org/local-storage.js","runtimeoptions":"https://extensions.turbowarp.org/runtime-options.js","cubesterWindowControls":"https://extensions.turbowarp.org/CubesterYT/WindowControls.js","iframePlus":"data:text/javascript;base64,Ly8gTmFtZTogSWZyYW1lUGx1cw0KLy8gQnk6IEBtaXN0aXVtIG9uIGRpc2NvcmQNCi8vIERlc2NyaXB0aW9uOiBEaXNwbGF5IHdlYnBhZ2VzIG9yIEhUTUwgb3ZlciB0aGUgc3RhZ2Ugd2l0aCB1bmlxdWUgSURzLiBNYWRlIHByaW1hcmlseSBmb3IgdXNlIGluIG9yaWdpbk9TIChodHRwczovL2dpdGh1Yi5jb20vTWlzdGl1bS9PcmlnaW4tT1MpLg0KDQooZnVuY3Rpb24oU2NyYXRjaCkgew0KICAgICJ1c2Ugc3RyaWN0IjsNCg0KICAgIGNvbnN0IGlmcmFtZXNNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgU0FOREJPWCA9IFsNCiAgICAgICAgImFsbG93LXNhbWUtb3JpZ2luIiwNCiAgICAgICAgImFsbG93LXNjcmlwdHMiLA0KICAgICAgICAiYWxsb3ctZm9ybXMiLA0KICAgICAgICAiYWxsb3ctbW9kYWxzIiwNCiAgICAgICAgImFsbG93LXBvcHVwcyIsDQogICAgICAgICJhbGxvdy1wcmVzZW50YXRpb24iLCAvLyBBbGxvdyBpbnRlcmFjdGlvbg0KICAgICAgICAiYWxsb3ctcG9pbnRlci1sb2NrIiwgLy8gQWxsb3cgcG9pbnRlciBsb2NrDQogICAgXTsNCg0KICAgIGNvbnN0IGZlYXR1cmVQb2xpY3kgPSB7fTsNCg0KICAgIGNsYXNzIElmcmFtZVBsdXNFeHRlbnNpb24gew0KICAgICAgICBzZXRaSW5kZXgoew0KICAgICAgICAgICAgSUQNCiAgICAgICAgfSkgew0KICAgICAgICAgICAgY29uc3QgaWZyYW1lSW5mbyA9IGlmcmFtZXNNYXAuZ2V0KElEKTsNCiAgICAgICAgICAgIGlmIChpZnJhbWVJbmZvKSB7DQogICAgICAgICAgICAgICAgY29uc3Qgew0KICAgICAgICAgICAgICAgICAgICBpZnJhbWUNCiAgICAgICAgICAgICAgICB9ID0gaWZyYW1lSW5mbzsNCiAgICAgICAgICAgICAgICBjb25zdCB3aW5kb3dJbmRleCA9IHRoaXMuZ2V0V2luZG93SW5kZXgoSUQpOw0KICAgICAgICAgICAgICAgIGlmcmFtZS5zdHlsZS56SW5kZXggPSB3aW5kb3dJbmRleDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGdldFdpbmRvd0luZGV4KElEKSB7DQogICAgICAgICAgICAvLyBJbXBsZW1lbnQgbG9naWMgdG8gZ2V0IHRoZSBpbmRleCBvZiB0aGUgd2luZG93IHdpdGggdGhlIHNwZWNpZmllZCBJRCBpbiB5b3VyIHdpbmRvdyBsaXN0DQogICAgICAgICAgICAvLyBSZXBsYWNlIHRoZSBmb2xsb3dpbmcgbGluZSB3aXRoIHlvdXIgYWN0dWFsIGxvZ2ljDQogICAgICAgICAgICByZXR1cm4gMTsNCiAgICAgICAgfQ0KDQogICAgICAgIGdldEluZm8oKSB7DQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgIG5hbWU6IFNjcmF0Y2gudHJhbnNsYXRlKCJJZnJhbWUgUGx1cyIpLA0KICAgICAgICAgICAgICAgIGlkOiAiaWZyYW1lUGx1cyIsDQogICAgICAgICAgICAgICAgY29sb3IxOiAnIzMzM2Q4MicsDQogICAgICAgICAgICAgICAgYmxvY2tzOiBbew0KICAgICAgICAgICAgICAgICAgICAgICAgb3Bjb2RlOiAiZGlzcGxheSIsDQogICAgICAgICAgICAgICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgic2hvdyB3ZWJzaXRlIFtVUkxdIHdpdGggSUQgW0lEXSIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVVJMOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAiaHR0cHM6Ly9leGFtcGxlLmNvbSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJRDogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogImlmcmFtZTEiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBvcGNvZGU6ICJzaG93SHRtbENvbnRlbnQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInNob3cgSFRNTCBjb250ZW50IFtIVE1MXSB3aXRoIElEIFtJRF0iKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhUTUw6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICI8cD5IZWxsbywgd29ybGQhPC9wPiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJRDogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogImlmcmFtZTEiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAiLS0tIiwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgb3Bjb2RlOiAicmVtb3ZlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJyZW1vdmUgaWZyYW1lIHdpdGggSUQgW0lEXSIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgSUQ6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICJpZnJhbWUxIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgb3Bjb2RlOiAicmVtb3ZlQWxsSWZyYW1lcyIsDQogICAgICAgICAgICAgICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgicmVtb3ZlIGFsbCBpZnJhbWVzIiksDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICItLS0iLA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBvcGNvZGU6ICJnZXRJZnJhbWVUaXRsZSIsDQogICAgICAgICAgICAgICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLA0KICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImdldCB0aXRsZSBvZiBpZnJhbWUgd2l0aCBJRCBbSURdIiksDQogICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJRDogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogImlmcmFtZTEiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBvcGNvZGU6ICJnZXRJZnJhbWVVUkwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJnZXQgVVJMIG9mIGlmcmFtZSB3aXRoIElEIFtJRF0iKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIElEOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAiaWZyYW1lMSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG9wY29kZTogInNldElmcmFtZVVSTCIsDQogICAgICAgICAgICAgICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgic2V0IFVSTCBvZiBpZnJhbWUgd2l0aCBJRCBbSURdIHRvIFtVUkxdIiksDQogICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJRDogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogImlmcmFtZTEiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVVJMOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAiaHR0cHM6Ly9leGFtcGxlLmNvbSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICItLS0iLA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBvcGNvZGU6ICJzaG93IiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJzaG93IGlmcmFtZSB3aXRoIElEIFtJRF0iKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIElEOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAiaWZyYW1lMSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG9wY29kZTogImhpZGUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImhpZGUgaWZyYW1lIHdpdGggSUQgW0lEXSIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgSUQ6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICJpZnJhbWUxIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgIi0tLSIsDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG9wY29kZTogInJlc2l6ZSIsDQogICAgICAgICAgICAgICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgicmVzaXplIGlmcmFtZSB3aXRoIElEIFtJRF0gdG8gd2lkdGggW1dJRFRIXSBhbmQgaGVpZ2h0IFtIRUlHSFRdIiksDQogICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJRDogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogImlmcmFtZTEiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgV0lEVEg6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IDQ4MCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhFSUdIVDogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogMzYwLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBvcGNvZGU6ICJtb3ZlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJtb3ZlIGlmcmFtZSB3aXRoIElEIFtJRF0gdG8geCBbWF0gYW5kIHkgW1ldIiksDQogICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJRDogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogImlmcmFtZTEiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWDogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFk6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG9wY29kZTogInNldENvcm5lcnMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInNldCBpZnJhbWUgd2l0aCBJRCBbSURdIHRvcC1sZWZ0IGNvcm5lciBhdCB4IFtYMV0gYW5kIHkgW1kxXSBib3R0b20tcmlnaHQgY29ybmVyIGF0IHggW1gyXSBhbmQgeSBbWTJdIiksDQogICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJRDogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogImlmcmFtZTEiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWDE6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBZMTogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFgyOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAxMDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBZMjogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogMTAwLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBvcGNvZGU6ICJzdGFtcCIsDQogICAgICAgICAgICAgICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgic3RhbXAgaWZyYW1lIHdpdGggSUQgW0lEXSB0byBzdGFnZSIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgSUQ6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICJpZnJhbWUxIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgIi0tLSIsDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG9wY29kZTogInNldExheWVyT2ZJZnJhbWUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInNldCBsYXllciBvZiBpZnJhbWUgd2l0aCBJRCBbSURdIHRvIFtMQVlFUl0iKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIElEOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAiaWZyYW1lMSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMQVlFUjogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogMSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgb3Bjb2RlOiAiZ2V0QWxsSWZyYW1lSURzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsDQogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiYWxsIGlmcmFtZSBJRHMiKSwNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgb3Bjb2RlOiAiZ2V0VG90YWxMYXllcnMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJ0b3RhbCBudW1iZXIgb2YgbGF5ZXJzIiksDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIC8vIE5ldyBibG9jayB0byBnZXQgdGhlIGxheWVyIG9mIGEgc3BlY2lmaWMgaWZyYW1lDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG9wY29kZTogImdldExheWVyT2ZJZnJhbWUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJsYXllciBvZiBpZnJhbWUgd2l0aCBJRCBbSURdIiksDQogICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJRDogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogImlmcmFtZTEiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIF0sDQogICAgICAgICAgICB9Ow0KICAgICAgICB9DQoNCiAgICAgICAgc2V0TGF5ZXJPZklmcmFtZSh7DQogICAgICAgICAgICBJRCwNCiAgICAgICAgICAgIExBWUVSDQogICAgICAgIH0pIHsNCiAgICAgICAgICAgIGNvbnN0IGlmcmFtZUluZm8gPSBpZnJhbWVzTWFwLmdldChJRCk7DQogICAgICAgICAgICBpZiAoaWZyYW1lSW5mbykgew0KICAgICAgICAgICAgICAgIGNvbnN0IHsNCiAgICAgICAgICAgICAgICAgICAgaWZyYW1lLA0KICAgICAgICAgICAgICAgICAgICBvdmVybGF5DQogICAgICAgICAgICAgICAgfSA9IGlmcmFtZUluZm87DQoNCiAgICAgICAgICAgICAgICAvLyBFbnN1cmUgdGhhdCB0aGUgc3R5bGUgcHJvcGVydHkgaXMgZGVmaW5lZCBiZWZvcmUgc2V0dGluZyB6SW5kZXgNCiAgICAgICAgICAgICAgICBpZiAob3ZlcmxheSAmJiBvdmVybGF5LnN0eWxlKSB7DQogICAgICAgICAgICAgICAgICAgIG92ZXJsYXkuc3R5bGUuekluZGV4ID0gTEFZRVI7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKGlmcmFtZSAmJiBpZnJhbWUuc3R5bGUpIHsNCiAgICAgICAgICAgICAgICAgICAgaWZyYW1lLnN0eWxlLnpJbmRleCA9IExBWUVSOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGdldFRvdGFsTGF5ZXJzKCkgew0KICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSB0b3RhbCBudW1iZXIgb2YgbGF5ZXJzDQogICAgICAgICAgICByZXR1cm4gU2NyYXRjaC5yZW5kZXJlci5fb3ZlcmxheXMubGVuZ3RoOw0KICAgICAgICB9DQoNCiAgICAgICAgZ2V0TGF5ZXJPZklmcmFtZSh7DQogICAgICAgICAgICBJRA0KICAgICAgICB9KSB7DQogICAgICAgICAgICBjb25zdCBpZnJhbWVJbmZvID0gaWZyYW1lc01hcC5nZXQoSUQpOw0KICAgICAgICAgICAgaWYgKGlmcmFtZUluZm8pIHsNCiAgICAgICAgICAgICAgICBjb25zdCB7DQogICAgICAgICAgICAgICAgICAgIG92ZXJsYXkNCiAgICAgICAgICAgICAgICB9ID0gaWZyYW1lSW5mbzsNCiAgICAgICAgICAgICAgICByZXR1cm4gU2NyYXRjaC5yZW5kZXJlci5fb3ZlcmxheXMuaW5kZXhPZihvdmVybGF5KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAtMTsgLy8gSWYgdGhlIGlmcmFtZSBpcyBub3QgZm91bmQNCiAgICAgICAgfQ0KDQogICAgICAgIGFzeW5jIGRpc3BsYXkoew0KICAgICAgICAgICAgVVJMLA0KICAgICAgICAgICAgSUQNCiAgICAgICAgfSkgew0KICAgICAgICAgICAgdGhpcy5yZW1vdmUoew0KICAgICAgICAgICAgICAgIElEDQogICAgICAgICAgICB9KTsgLy8gUmVtb3ZlIGV4aXN0aW5nIGlmcmFtZSB3aXRoIHRoZSBzYW1lIElELCBpZiBhbnkNCg0KICAgICAgICAgICAgaWYgKGF3YWl0IFNjcmF0Y2guY2FuRW1iZWQoVVJMKSkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHNyYyA9IFNjcmF0Y2guQ2FzdC50b1N0cmluZyhVUkwpOw0KICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJhbWUoc3JjLCBJRCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBzaG93SHRtbENvbnRlbnQoew0KICAgICAgICAgICAgSFRNTCwNCiAgICAgICAgICAgIElEDQogICAgICAgIH0pIHsNCiAgICAgICAgICAgIHRoaXMucmVtb3ZlKHsNCiAgICAgICAgICAgICAgICBJRA0KICAgICAgICAgICAgfSk7IC8vIFJlbW92ZSBleGlzdGluZyBpZnJhbWUgd2l0aCB0aGUgc2FtZSBJRCwgaWYgYW55DQoNCiAgICAgICAgICAgIGNvbnN0IHNyYyA9IGBkYXRhOnRleHQvaHRtbDtjaGFyc2V0PXV0Zi04LCR7ZW5jb2RlVVJJQ29tcG9uZW50KEhUTUwpfWA7DQogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyYW1lKHNyYywgSUQpOw0KICAgICAgICB9DQoNCg0KICAgICAgICByZW1vdmUoew0KICAgICAgICAgICAgSUQNCiAgICAgICAgfSkgew0KICAgICAgICAgICAgY29uc3QgaWZyYW1lSW5mbyA9IGlmcmFtZXNNYXAuZ2V0KElEKTsNCiAgICAgICAgICAgIGlmIChpZnJhbWVJbmZvKSB7DQogICAgICAgICAgICAgICAgY29uc3Qgew0KICAgICAgICAgICAgICAgICAgICBpZnJhbWUsDQogICAgICAgICAgICAgICAgICAgIG92ZXJsYXkNCiAgICAgICAgICAgICAgICB9ID0gaWZyYW1lSW5mbzsNCiAgICAgICAgICAgICAgICBTY3JhdGNoLnJlbmRlcmVyLnJlbW92ZU92ZXJsYXkoaWZyYW1lKTsNCiAgICAgICAgICAgICAgICBpZnJhbWVzTWFwLmRlbGV0ZShJRCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBnZXRBbGxJZnJhbWVJRHMoKSB7DQogICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShpZnJhbWVzTWFwLmtleXMoKSk7DQogICAgICAgIH0NCg0KICAgICAgICByZW1vdmVBbGxJZnJhbWVzKCkgew0KICAgICAgICAgICAgLy8gUmVtb3ZlIGFsbCBpZnJhbWVzDQogICAgICAgICAgICBmb3IgKGNvbnN0IHsNCiAgICAgICAgICAgICAgICAgICAgaWZyYW1lLA0KICAgICAgICAgICAgICAgICAgICBvdmVybGF5DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIG9mIGlmcmFtZXNNYXAudmFsdWVzKCkpIHsNCiAgICAgICAgICAgICAgICBTY3JhdGNoLnJlbmRlcmVyLnJlbW92ZU92ZXJsYXkoaWZyYW1lKTsNCiAgICAgICAgICAgICAgICBTY3JhdGNoLnJlbmRlcmVyLnJlbW92ZU92ZXJsYXkob3ZlcmxheSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZnJhbWVzTWFwLmNsZWFyKCk7DQogICAgICAgIH0NCg0KICAgICAgICBzaG93KHsNCiAgICAgICAgICAgIElEDQogICAgICAgIH0pIHsNCiAgICAgICAgICAgIGNvbnN0IGlmcmFtZUluZm8gPSBpZnJhbWVzTWFwLmdldChJRCk7DQogICAgICAgICAgICBpZiAoaWZyYW1lSW5mbykgew0KICAgICAgICAgICAgICAgIGNvbnN0IHsNCiAgICAgICAgICAgICAgICAgICAgaWZyYW1lDQogICAgICAgICAgICAgICAgfSA9IGlmcmFtZUluZm87DQogICAgICAgICAgICAgICAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAiIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGhpZGUoew0KICAgICAgICAgICAgSUQNCiAgICAgICAgfSkgew0KICAgICAgICAgICAgY29uc3QgaWZyYW1lSW5mbyA9IGlmcmFtZXNNYXAuZ2V0KElEKTsNCiAgICAgICAgICAgIGlmIChpZnJhbWVJbmZvKSB7DQogICAgICAgICAgICAgICAgY29uc3Qgew0KICAgICAgICAgICAgICAgICAgICBpZnJhbWUNCiAgICAgICAgICAgICAgICB9ID0gaWZyYW1lSW5mbzsNCiAgICAgICAgICAgICAgICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGdldElmcmFtZVRpdGxlKHsNCiAgICAgICAgICAgIElEDQogICAgICAgIH0pIHsNCiAgICAgICAgICAgIGNvbnN0IGlmcmFtZUluZm8gPSBpZnJhbWVzTWFwLmdldChJRCk7DQogICAgICAgICAgICBpZiAoaWZyYW1lSW5mbykgew0KICAgICAgICAgICAgICAgIGNvbnN0IHsNCiAgICAgICAgICAgICAgICAgICAgaWZyYW1lDQogICAgICAgICAgICAgICAgfSA9IGlmcmFtZUluZm87DQogICAgICAgICAgICAgICAgcmV0dXJuIGlmcmFtZS5jb250ZW50RG9jdW1lbnQudGl0bGU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gIiI7DQogICAgICAgIH0NCg0KICAgICAgICByZXNpemUoew0KICAgICAgICAgICAgSUQsDQogICAgICAgICAgICBXSURUSCwNCiAgICAgICAgICAgIEhFSUdIVA0KICAgICAgICB9KSB7DQogICAgICAgICAgICBjb25zdCBpZnJhbWVJbmZvID0gaWZyYW1lc01hcC5nZXQoSUQpOw0KICAgICAgICAgICAgaWYgKGlmcmFtZUluZm8pIHsNCiAgICAgICAgICAgICAgICBjb25zdCB7DQogICAgICAgICAgICAgICAgICAgIGlmcmFtZQ0KICAgICAgICAgICAgICAgIH0gPSBpZnJhbWVJbmZvOw0KICAgICAgICAgICAgICAgIGlmcmFtZUluZm8ueCAtPSAoV0lEVEggLSBpZnJhbWVJbmZvLndpZHRoKSAvIDI7DQogICAgICAgICAgICAgICAgaWZyYW1lSW5mby55IC09IChIRUlHSFQgLSBpZnJhbWVJbmZvLmhlaWdodCkgLyAyOw0KICAgICAgICAgICAgICAgIGlmcmFtZUluZm8ud2lkdGggPSBXSURUSDsNCiAgICAgICAgICAgICAgICBpZnJhbWVJbmZvLmhlaWdodCA9IEhFSUdIVDsNCiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZyYW1lQXR0cmlidXRlcyhpZnJhbWVJbmZvKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIG1vdmUoew0KICAgICAgICAgICAgSUQsDQogICAgICAgICAgICBYLA0KICAgICAgICAgICAgWQ0KICAgICAgICB9KSB7DQogICAgICAgICAgICBjb25zdCBpZnJhbWVJbmZvID0gaWZyYW1lc01hcC5nZXQoSUQpOw0KICAgICAgICAgICAgaWYgKGlmcmFtZUluZm8pIHsNCiAgICAgICAgICAgICAgICBpZnJhbWVJbmZvLnggPSBYIC0gaWZyYW1lSW5mby53aWR0aCAvIDI7DQogICAgICAgICAgICAgICAgaWZyYW1lSW5mby55ID0gWSArIGlmcmFtZUluZm8uaGVpZ2h0IC8gMjsNCiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUZyYW1lQXR0cmlidXRlcyhpZnJhbWVJbmZvKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHNldENvcm5lcnMoew0KICAgICAgICAgICAgSUQsDQogICAgICAgICAgICBYMSwNCiAgICAgICAgICAgIFkxLA0KICAgICAgICAgICAgWDIsDQogICAgICAgICAgICBZMg0KICAgICAgICB9KSB7DQogICAgICAgICAgICBjb25zdCBpZnJhbWVJbmZvID0gaWZyYW1lc01hcC5nZXQoSUQpOw0KICAgICAgICAgICAgaWYgKGlmcmFtZUluZm8pIHsNCiAgICAgICAgICAgICAgICBpZnJhbWVJbmZvLnggPSBYMTsNCiAgICAgICAgICAgICAgICBpZnJhbWVJbmZvLnkgPSBZMTsNCiAgICAgICAgICAgICAgICBpZnJhbWVJbmZvLndpZHRoID0gWDIgLSBYMTsNCiAgICAgICAgICAgICAgICBpZnJhbWVJbmZvLmhlaWdodCA9IFkyIC0gWTE7DQogICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGcmFtZUF0dHJpYnV0ZXMoaWZyYW1lSW5mbyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBzdGFtcCh7DQogICAgICAgICAgICBJRA0KICAgICAgICB9KSB7DQogICAgICAgICAgICBjb25zdCBpZnJhbWVJbmZvID0gaWZyYW1lc01hcC5nZXQoSUQpOw0KICAgICAgICAgICAgaWYgKGlmcmFtZUluZm8pIHsNCiAgICAgICAgICAgICAgICBjb25zdCB7DQogICAgICAgICAgICAgICAgICAgIGlmcmFtZQ0KICAgICAgICAgICAgICAgIH0gPSBpZnJhbWVJbmZvOw0KDQogICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGltYWdlIGVsZW1lbnQNCiAgICAgICAgICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTsNCg0KICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgc291cmNlIG9mIHRoZSBpbWFnZSB0byB0aGUgZGF0YSBVUkwgb2YgdGhlIGlmcmFtZSBjb250ZW50cw0KICAgICAgICAgICAgICAgIGltZy5zcmMgPSB0aGlzLmdldElmcmFtZURhdGFVUkwoaWZyYW1lKTsNCg0KICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgaW1hZ2UgdG8gdGhlIHN0YWdlDQogICAgICAgICAgICAgICAgU2NyYXRjaC5zdGFnZS5hcHBlbmRDaGlsZChpbWcpOw0KDQogICAgICAgICAgICAgICAgLy8gQWRkaXRpb25hbCBhY3Rpb25zIGFzIG5lZWRlZC4uLg0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGdldElmcmFtZVVSTChJRCkgew0KICAgICAgICAgICAgSUQgPSBJRC5JRDsNCiAgICAgICAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKElEKTsNCiAgICAgICAgICAgIGlmIChpZnJhbWUpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBpZnJhbWVVcmwgPSBpZnJhbWUuc3JjOw0KICAgICAgICAgICAgICAgIHJldHVybiBpZnJhbWVVcmw7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIklmcmFtZSB3aXRoIElEICIgKyBJRC50b1N0cmluZygpICsgIiBub3QgZm91bmQuIik7DQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBzZXRJZnJhbWVVUkwoew0KICAgICAgICAgICAgSUQsDQogICAgICAgICAgICBVUkwNCiAgICAgICAgfSkgew0KICAgICAgICAgICAgY29uc3QgaWZyYW1lSW5mbyA9IGlmcmFtZXNNYXAuZ2V0KElEKTsNCiAgICAgICAgICAgIGlmIChpZnJhbWVJbmZvKSB7DQogICAgICAgICAgICAgICAgY29uc3Qgew0KICAgICAgICAgICAgICAgICAgICBpZnJhbWUNCiAgICAgICAgICAgICAgICB9ID0gaWZyYW1lSW5mbzsNCiAgICAgICAgICAgICAgICBpZnJhbWUuc3JjID0gVVJMOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgZ2V0SWZyYW1lRGF0YVVSTChpZnJhbWUpIHsNCiAgICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBjYW52YXMgZWxlbWVudA0KICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7DQogICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7DQoNCiAgICAgICAgICAgIC8vIFNldCB0aGUgY2FudmFzIHNpemUgdG8gbWF0Y2ggdGhlIGlmcmFtZSBzaXplDQogICAgICAgICAgICBjYW52YXMud2lkdGggPSBpZnJhbWUub2Zmc2V0V2lkdGg7DQogICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaWZyYW1lLm9mZnNldEhlaWdodDsNCg0KICAgICAgICAgICAgLy8gRHJhdyB0aGUgaWZyYW1lIGNvbnRlbnRzIG9udG8gdGhlIGNhbnZhcw0KICAgICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuYm9keSwgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsNCg0KICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBkYXRhIFVSTCBvZiB0aGUgY2FudmFzDQogICAgICAgICAgICByZXR1cm4gY2FudmFzLnRvRGF0YVVSTCgpOw0KICAgICAgICB9DQoNCiAgICAgICAgY3JlYXRlRnJhbWUoc3JjLCBJRCkgew0KICAgICAgICAgICAgSUQgPSBJRC50b1N0cmluZygpDQogICAgICAgICAgICBjb25zdCBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTsNCiAgICAgICAgICAgIGlmcmFtZS5zdHlsZS53aWR0aCA9ICIxMDAlIjsNCiAgICAgICAgICAgIGlmcmFtZS5zdHlsZS5oZWlnaHQgPSAiMTAwJSI7DQogICAgICAgICAgICBpZnJhbWUuc3R5bGUuYm9yZGVyID0gIm5vbmUiOw0KICAgICAgICAgICAgaWZyYW1lLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsNCiAgICAgICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoImlkIiwgSUQpOw0KICAgICAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgic2FuZGJveCIsIFNBTkRCT1guam9pbigiICIpKTsNCiAgICAgICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoDQogICAgICAgICAgICAgICAgImFsbG93IiwNCiAgICAgICAgICAgICAgICBPYmplY3QuZW50cmllcyhmZWF0dXJlUG9saWN5KQ0KICAgICAgICAgICAgICAgIC5tYXAoKFtuYW1lLCBwZXJtaXNzaW9uXSkgPT4gYCR7bmFtZX0gJHtwZXJtaXNzaW9ufWApDQogICAgICAgICAgICAgICAgLmpvaW4oIjsgIikNCiAgICAgICAgICAgICk7DQogICAgICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCJhbGxvd3RyYW5zcGFyZW5jeSIsICJ0cnVlIik7DQogICAgICAgICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCJzcmMiLCBzcmMpOw0KDQogICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gU2NyYXRjaC5yZW5kZXJlci5hZGRPdmVybGF5KGlmcmFtZSwgIm1hbnVhbCIpOw0KDQogICAgICAgICAgICAvLyBTdG9yZSBpZnJhbWUgaW5mb3JtYXRpb24gaW4gdGhlIG1hcA0KICAgICAgICAgICAgaWZyYW1lc01hcC5zZXQoSUQsIHsNCiAgICAgICAgICAgICAgICBpZnJhbWUsDQogICAgICAgICAgICAgICAgb3ZlcmxheSwNCiAgICAgICAgICAgICAgICB3aWR0aDogNDgwLA0KICAgICAgICAgICAgICAgIGhlaWdodDogMzYwLA0KICAgICAgICAgICAgICAgIHg6IDAsDQogICAgICAgICAgICAgICAgeTogMCwNCiAgICAgICAgICAgICAgICBpbnRlcmFjdGl2ZTogdHJ1ZQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vIFVwZGF0ZSBpZnJhbWUgYXR0cmlidXRlcw0KICAgICAgICAgICAgdGhpcy51cGRhdGVGcmFtZUF0dHJpYnV0ZXMoaWZyYW1lc01hcC5nZXQoSUQpKTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgdXBkYXRlRnJhbWVBdHRyaWJ1dGVzKGlmcmFtZUluZm8pIHsNCiAgICAgICAgICAgIGlmICghaWZyYW1lSW5mbykgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3Qgew0KICAgICAgICAgICAgICAgIGlmcmFtZSwNCiAgICAgICAgICAgICAgICBvdmVybGF5LA0KICAgICAgICAgICAgICAgIHdpZHRoLA0KICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB4LA0KICAgICAgICAgICAgICAgIHksDQogICAgICAgICAgICAgICAgaW50ZXJhY3RpdmUNCiAgICAgICAgICAgIH0gPSBpZnJhbWVJbmZvOw0KDQogICAgICAgICAgICAvLyBHZXQgdGhlIGNlbnRlciBvZiB0aGUgY2FudmFzDQogICAgICAgICAgICBjb25zdCBjZW50ZXJYID0gU2NyYXRjaC52bS5ydW50aW1lLnN0YWdlV2lkdGggLyAyOw0KICAgICAgICAgICAgY29uc3QgY2VudGVyWSA9IFNjcmF0Y2gudm0ucnVudGltZS5zdGFnZUhlaWdodCAvIDI7DQoNCiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGlmcmFtZSByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIHRoZSBjYW52YXMNCiAgICAgICAgICAgIGlmcmFtZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7Y2VudGVyWCArIHh9cHgsICR7Y2VudGVyWSAtIHl9cHgpYDsNCiAgICAgICAgICAgIGlmcmFtZS5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YDsNCiAgICAgICAgICAgIGlmcmFtZS5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9cHhgOw0KDQogICAgICAgICAgICBvdmVybGF5Lm1vZGUgPSAibWFudWFsIjsNCiAgICAgICAgICAgIFNjcmF0Y2gucmVuZGVyZXIuX3VwZGF0ZU92ZXJsYXlzKCk7DQoNCiAgICAgICAgICAgIGlmcmFtZS5zdHlsZS5wb2ludGVyRXZlbnRzID0gaW50ZXJhY3RpdmUgPyAiYXV0byIgOiAibm9uZSI7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBTY3JhdGNoLmV4dGVuc2lvbnMucmVnaXN0ZXIobmV3IElmcmFtZVBsdXNFeHRlbnNpb24oKSk7DQp9KShTY3JhdGNoKTs=","htmlInputs":"data:text/javascript;base64,KGZ1bmN0aW9uIChTY3JhdGNoKSB7DQoNCiAgY29uc3QgQ2FzdCA9IFNjcmF0Y2guQ2FzdDsNCiAgY29uc3QgcnVudGltZSA9IFNjcmF0Y2gudm0ucnVudGltZTsNCiAgY2xhc3MgaHRtbElucHV0cyB7DQoNCiAgICBnZXRUZXh0KGVsZW0pIHsNCiAgICAgIGlmIChlbGVtLnRhZ05hbWUgPT09ICJURVhUQVJFQSIgfHwgKGVsZW0udGFnTmFtZSA9PT0gIklOUFVUIiAmJiBlbGVtLnR5cGUgPT09ICJ0ZXh0IikpIHsNCiAgICAgICAgcmV0dXJuIGVsZW0udmFsdWUuc3Vic3RyaW5nKGVsZW0uc2VsZWN0aW9uU3RhcnQsIGVsZW0uc2VsZWN0aW9uRW5kKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBudWxsOw0KICAgIH0NCg0KICAgIGNvbnN0cnVjdG9yKCkgew0KICAgICAgdGhpcy5pbnB1dHMgPSB7fTsNCiAgICAgIHRoaXMuYWRkRm9udExpbmsoKTsNCiAgICB9DQoNCiAgICBhZGRGb250TGluaygpIHsNCiAgICAgIGNvbnN0IGxpbmsxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpOw0KICAgICAgbGluazEucmVsID0gJ3ByZWNvbm5lY3QnOw0KICAgICAgbGluazEuaHJlZiA9ICdodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tJzsNCiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluazEpOw0KDQogICAgICBjb25zdCBsaW5rMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTsNCiAgICAgIGxpbmsyLnJlbCA9ICdwcmVjb25uZWN0JzsNCiAgICAgIGxpbmsyLmhyZWYgPSAnaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbSc7DQogICAgICBsaW5rMi5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnOw0KICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rMik7DQoNCiAgICAgIGNvbnN0IGxpbmszID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpOw0KICAgICAgbGluazMucmVsID0gJ3N0eWxlc2hlZXQnOw0KICAgICAgbGluazMuaHJlZiA9ICdodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PVNoYXJlK1RlY2grTW9ubyZkaXNwbGF5PXN3YXAnOw0KICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rMyk7DQogICAgfQ0KDQogICAgZ2V0SW5mbygpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIGlkOiAiaHRtbElucHV0cyIsDQogICAgICAgIG5hbWU6ICJIVE1MIElucHV0cyIsDQogICAgICAgIGNvbG9yMTogIiNmMDY1MjkiLA0KICAgICAgICBibG9ja3M6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICdjcmVhdGVJbnB1dCcsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICB0ZXh0OiAnY3JlYXRlIGlucHV0IHdpdGggaWQgW0lEXSBhdCB4OiBbWF0geTogW1ldJywNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBJRDogew0KICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywNCiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICdpbnB1dDEnLA0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICBYOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogMCwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgWTogew0KICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwNCiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IDAsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAnY3JlYXRlTXVsdGlsaW5lSW5wdXQnLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgdGV4dDogJ2NyZWF0ZSBtdWx0aWxpbmUgaW5wdXQgd2l0aCBpZCBbSURdIGF0IHg6IFtYXSB5OiBbWV0nLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIElEOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2lucHV0MScsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIFg6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsDQogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAwLA0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICBZOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogMCwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxBQkVMLA0KICAgICAgICAgICAgdGV4dDogIk1hbmFnZSBJbnB1dHMiLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAnZ2V0SW5wdXRWYWx1ZScsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLA0KICAgICAgICAgICAgdGV4dDogJ2dldCB2YWx1ZSBvZiBpbnB1dCBbSURdJywNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBJRDogew0KICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywNCiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICdpbnB1dDEnLA0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogJ3NldElucHV0VmFsdWUnLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgdGV4dDogJ3NldCB2YWx1ZSBvZiBpbnB1dCBbSURdIHRvIFtWQUxVRV0nLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIElEOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2lucHV0MScsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIFZBTFVFOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ0hlbGxvLCBXb3JsZCEnLA0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogJ2dldElucHV0TGluZXMnLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwNCiAgICAgICAgICAgIHRleHQ6ICdnZXQgYXJyYXkgb2YgbGluZXMgb2YgaW5wdXQgW0lEXScsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgSUQ6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAnaW5wdXQxJywNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICdzZXRMaXN0VG9JbnB1dExpbmVzJywNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgIHRleHQ6ICdzZXQgbGlzdCBbTElTVF0gdG8gaW5wdXQgbGluZXMgW0lEXScsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgSUQ6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAnaW5wdXQxJywNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgTElTVDogew0KICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywNCiAgICAgICAgICAgICAgICBtZW51OiAnbGlzdCcsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgICAgIi0tLSIsDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAnaW5wdXRDaGFuZ2VkJywNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQk9PTEVBTiwNCiAgICAgICAgICAgIHRleHQ6ICdpbnB1dCBbSURdIGNoYW5nZWQ/JywNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBJRDogew0KICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywNCiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICdpbnB1dDEnLA0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogJ3Jlc2V0SW5wdXRDaGFuZ2VkJywNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgIHRleHQ6ICdyZXNldCBpbnB1dCBbSURdIGNoYW5nZWQnLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIElEOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2lucHV0MScsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgICAgIi0tLSIsDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAnaW5wdXRGb2N1c2VkPycsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkJPT0xFQU4sDQogICAgICAgICAgICB0ZXh0OiAnaW5wdXQgW0lEXSBmb2N1c2VkPycsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgSUQ6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAnaW5wdXQxJywNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICdpbnB1dEV4aXN0cycsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkJPT0xFQU4sDQogICAgICAgICAgICB0ZXh0OiAnaW5wdXQgd2l0aCBpZCBbSURdIGV4aXN0cycsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgSUQ6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAnaW5wdXQxJywNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICAiLS0tIiwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICdtb3ZlSW5wdXQnLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgdGV4dDogJ21vdmUgaW5wdXQgW0lEXSB0byB4OiBbWF0geTogW1ldJywNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBJRDogew0KICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywNCiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICdpbnB1dDEnLA0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICBYOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogMCwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgWTogew0KICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwNCiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IDAsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAncmVzaXplSW5wdXQnLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgdGV4dDogJ3Jlc2l6ZSBpbnB1dCBbSURdIHRvIHdpZHRoOiBbV0lEVEhdIGhlaWdodDogW0hFSUdIVF0nLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIElEOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2lucHV0MScsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIFdJRFRIOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogMTAwLA0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICBIRUlHSFQ6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsDQogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAyMCwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICAiLS0tIiwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICdzZXRJbnB1dFN0eWxlJywNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgIHRleHQ6ICdzZXQgc3R5bGUgW1NUWUxFXSBvZiBpbnB1dCBbSURdIHRvIFtWQUxVRV0nLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIElEOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2lucHV0MScsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIFNUWUxFOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2NvbG9yJywNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgVkFMVUU6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAncmVkJywNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICdzZXRJbnB1dFN0eWxlU3RhcnQnLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgdGV4dDogJ3NldCBzdHlsZSBbU1RZTEVdIG9mIGlucHV0cyB3aXRoIGlkIHN0YXJ0aW5nIHdpdGggW0lEXSB0byBbVkFMVUVdJywNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBJRDogew0KICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywNCiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICdpbnB1dCcsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIFNUWUxFOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2NvbG9yJywNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgVkFMVUU6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAncmVkJywNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICAiLS0tIiwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICdzZXRJbnB1dFNldHRpbmcnLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgdGV4dDogJ1tTRVRUSU5HXSBpbnB1dCBbSURdJywNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBTRVRUSU5HOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIG1lbnU6ICdzZXR0aW5ncycsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIElEOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2lucHV0MScsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAnc2V0SW5wdXRTZXR0aW5nT25BbGxTdGFydCcsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICB0ZXh0OiAnW1NFVFRJTkddIGFsbCBpbnB1dHMgd2l0aCBpZCBzdGFydGluZyB3aXRoIFtJRF0nLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIFNFVFRJTkc6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgbWVudTogJ3NldHRpbmdzJywNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgSUQ6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAnaW5wdXQnLA0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9LA0KICAgICAgICAgICItLS0iLA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogJ3JlbW92ZUFsbElucHV0cycsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICB0ZXh0OiAncmVtb3ZlIGFsbCBpbnB1dHMnLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAncmVtb3ZlQWxsSW5wdXRzSWRTdGFydCcsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICB0ZXh0OiAncmVtb3ZlIGFsbCBpbnB1dHMgd2l0aCBpZCBzdGFydGluZyB3aXRoIFtJRF0nLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIElEOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2lucHV0JywNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICdsaXN0SW5wdXRzJywNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsDQogICAgICAgICAgICB0ZXh0OiAnbGlzdCBhbGwgaW5wdXRzJywNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuTEFCRUwsDQogICAgICAgICAgICB0ZXh0OiAiU2VsZWN0aW9ucyIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICdnZXRTZWxlY3Rpb25EYXRhJywNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsDQogICAgICAgICAgICB0ZXh0OiAnZ2V0IHNlbGVjdGlvbiBkYXRhIG9mIGlucHV0IFtJRF0nLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIElEOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2lucHV0MScsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAnZ2V0U2VsZWN0aW9uUG9zaXRpb24nLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwNCiAgICAgICAgICAgIHRleHQ6ICdnZXQgc2VsZWN0aW9uIHBvc2l0aW9uIG9mIGlucHV0IFtJRF0nLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIElEOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2lucHV0MScsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAnc2V0U2VsZWN0aW9uUmFuZ2UnLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgdGV4dDogJ3NldCBzZWxlY3Rpb24gcmFuZ2Ugb2YgaW5wdXQgW0lEXSBmcm9tIFtTVEFSVF0gdG8gW0VORF0nLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIElEOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2lucHV0MScsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIFNUQVJUOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogMCwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgRU5EOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogMCwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICdnZXRDdXJzb3JMaW5lJywNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsDQogICAgICAgICAgICB0ZXh0OiAnZ2V0IHNlbGVjdGlvbiBbU0VMRUNUSU9OXSBsaW5lIG9mIGlucHV0IFtJRF0nLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIFNFTEVDVElPTjogew0KICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywNCiAgICAgICAgICAgICAgICBtZW51OiAnc2VsZWN0aW9uJywNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgSUQ6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAnaW5wdXQxJywNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICdnZXRDdXJzb3JDb2x1bW4nLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwNCiAgICAgICAgICAgIHRleHQ6ICdnZXQgc2VsZWN0aW9uIFtTRUxFQ1RJT05dIGNvbHVtbiBvZiBpbnB1dCBbSURdJywNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBTRUxFQ1RJT046IHsNCiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgbWVudTogJ3NlbGVjdGlvbicsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIElEOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2lucHV0MScsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5MQUJFTCwNCiAgICAgICAgICAgIHRleHQ6ICJTY3JvbGxpbmciLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAnZ2V0U2Nyb2xsUG9zaXRpb24nLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwNCiAgICAgICAgICAgIHRleHQ6ICdnZXQgc2Nyb2xsIHBvc2l0aW9uIG9mIGlucHV0IFtJRF0nLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIElEOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2lucHV0MScsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAnbWF4U2Nyb2xsUG9zaXRpb24nLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwNCiAgICAgICAgICAgIHRleHQ6ICdtYXggc2Nyb2xsIHBvc2l0aW9uIG9mIGlucHV0IFtJRF0nLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIElEOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2lucHV0MScsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5MQUJFTCwNCiAgICAgICAgICAgIHRleHQ6ICJBZHZhbmNlZCIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICdnZXRBdHRyaWJ1dGUnLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwNCiAgICAgICAgICAgIHRleHQ6ICdnZXQgYXR0cmlidXRlIFtBVFRSXSBvZiBpbnB1dCB3aXRoIGlkIFtJRF0nLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIElEOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2lucHV0MScsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIEFUVFI6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAndmFsdWUnLA0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogJ3NldEF0dHJpYnV0ZScsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICB0ZXh0OiAnc2V0IGF0dHJpYnV0ZSBbQVRUUl0gb2YgaW5wdXQgd2l0aCBpZCBbSURdIHRvIFtWQUxVRV0nLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIElEOiB7DQogICAgICAgICAgICAgICAgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLA0KICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2lucHV0MScsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIEFUVFI6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsDQogICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAndmFsdWUnLA0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICBWQUxVRTogew0KICAgICAgICAgICAgICAgIHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywNCiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICdIZWxsbywgV29ybGQhJywNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgXSwNCiAgICAgICAgbWVudXM6IHsNCiAgICAgICAgICBzZXR0aW5nczogew0KICAgICAgICAgICAgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLA0KICAgICAgICAgICAgaXRlbXM6IFsNCiAgICAgICAgICAgICAgIkZvY3VzIiwNCiAgICAgICAgICAgICAgIkRlbGV0ZSIsDQogICAgICAgICAgICAgICJEaXNhYmxlIiwNCiAgICAgICAgICAgICAgIkVuYWJsZSIsDQogICAgICAgICAgICAgICJIaWRlIiwNCiAgICAgICAgICAgICAgIlNob3ciLA0KICAgICAgICAgICAgXQ0KICAgICAgICAgIH0sDQogICAgICAgICAgc2VsZWN0aW9uOiB7DQogICAgICAgICAgICBhY2NlcHRSZXBvcnRlcnM6IHRydWUsDQogICAgICAgICAgICBpdGVtczogWw0KICAgICAgICAgICAgICAiU3RhcnQiLA0KICAgICAgICAgICAgICAiRW5kIiwNCiAgICAgICAgICAgIF0NCiAgICAgICAgICB9LA0KICAgICAgICAgIGxpc3Q6IHsNCiAgICAgICAgICAgIGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwNCiAgICAgICAgICAgIGl0ZW1zOiAiZ2V0TGlzdHMiDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgZ2V0TGlzdHMoKSB7DQogICAgICBsZXQgZ2xvYmFsID0gdm0ucnVudGltZS5nZXRUYXJnZXRGb3JTdGFnZSgpLnZhcmlhYmxlcw0KICAgICAgZ2xvYmFsID8/PSB7fQ0KICAgICAgZ2xvYmFsID0gT2JqZWN0LnZhbHVlcyhnbG9iYWwpLmZpbHRlcih2ID0+IHYudHlwZSA9PT0gJ2xpc3QnKQ0KDQogICAgICBsZXQgbG9jYWwgPSB2bS5lZGl0aW5nVGFyZ2V0LnZhcmlhYmxlcw0KICAgICAgbG9jYWwgPz89IHt9DQogICAgICBsb2NhbCA9IE9iamVjdC52YWx1ZXMobG9jYWwpLmZpbHRlcih2ID0+IHYudHlwZSA9PT0gJ2xpc3QnKQ0KDQogICAgICBpZiAoZ2xvYmFsLmxlbmd0aCA9PT0gMCAmJiBsb2NhbC5sZW5ndGggPT09IDApIHsNCiAgICAgICAgcmV0dXJuIFsiUGljayBBIExpc3QiXQ0KICAgICAgfQ0KDQogICAgICByZXR1cm4gZ2xvYmFsLmNvbmNhdChsb2NhbCkubWFwKHYgPT4gKHsNCiAgICAgICAgdGV4dDogdi5uYW1lLA0KICAgICAgICB2YWx1ZTogdi5pZA0KICAgICAgfSkpDQogICAgfQ0KDQogICAgY3JlYXRlSW5wdXQoeyBJRCwgWCwgWSB9KSB7DQogICAgICBJRCA9IENhc3QudG9TdHJpbmcoSUQpOw0KICAgICAgWCA9IENhc3QudG9OdW1iZXIoWCk7DQogICAgICBZID0gQ2FzdC50b051bWJlcihZKTsNCiAgICAgIGlmICh0aGlzLmlucHV0c1tJRF0pIHsNCiAgICAgICAgU2NyYXRjaC5yZW5kZXJlci5yZW1vdmVPdmVybGF5KHRoaXMuaW5wdXRzW0lEXSk7DQogICAgICAgIGRlbGV0ZSB0aGlzLmlucHV0c1tJRF07DQogICAgICB9DQogICAgICBsZXQgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOw0KICAgICAgaW5wdXQuaWQgPSBJRDsNCiAgICAgIGlucHV0LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJzsNCiAgICAgIGlucHV0LnN0eWxlLmxlZnQgPSAoWCArIChydW50aW1lLnN0YWdlV2lkdGggLyAyKSkgKyAncHgnOw0KICAgICAgaW5wdXQuc3R5bGUudG9wID0gKChZICogLTEpICsgKHJ1bnRpbWUuc3RhZ2VIZWlnaHQgLyAyKSkgKyAncHgnOw0KICAgICAgaW5wdXQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJzsNCiAgICAgIGlucHV0LnN0eWxlLmZvbnRGYW1pbHkgPSAiJ1NoYXJlIFRlY2ggTW9ubycsIG1vbm9zcGFjZSI7DQogICAgICBpbnB1dC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKC01MCUsIC01MCUpJzsNCiAgICAgIGlucHV0LmNoYW5nZWQgPSBmYWxzZTsNCiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4gew0KICAgICAgICBpbnB1dC5jaGFuZ2VkID0gdHJ1ZTsNCiAgICAgIH0pOw0KICAgICAgU2NyYXRjaC5yZW5kZXJlci5hZGRPdmVybGF5KGlucHV0KTsNCiAgICAgIHRoaXMuaW5wdXRzW0lEXSA9IGlucHV0Ow0KICAgIH0NCg0KICAgIGNyZWF0ZU11bHRpbGluZUlucHV0KHsgSUQsIFgsIFkgfSkgew0KICAgICAgSUQgPSBDYXN0LnRvU3RyaW5nKElEKTsNCiAgICAgIFggPSBDYXN0LnRvTnVtYmVyKFgpOw0KICAgICAgWSA9IENhc3QudG9OdW1iZXIoWSk7DQogICAgICBpZiAodGhpcy5pbnB1dHNbSURdKSB7DQogICAgICAgIFNjcmF0Y2gucmVuZGVyZXIucmVtb3ZlT3ZlcmxheSh0aGlzLmlucHV0c1tJRF0pOw0KICAgICAgICBkZWxldGUgdGhpcy5pbnB1dHNbSURdOw0KICAgICAgfQ0KICAgICAgbGV0IHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTsNCiAgICAgIHRleHRhcmVhLmlkID0gSUQ7DQogICAgICB0ZXh0YXJlYS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7DQogICAgICB0ZXh0YXJlYS5zdHlsZS5sZWZ0ID0gKFggKyAocnVudGltZS5zdGFnZVdpZHRoIC8gMikpICsgJ3B4JzsNCiAgICAgIHRleHRhcmVhLnN0eWxlLnRvcCA9ICgoWSAqIC0xKSArIChydW50aW1lLnN0YWdlSGVpZ2h0IC8gMikpICsgJ3B4JzsNCiAgICAgIHRleHRhcmVhLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7DQogICAgICB0ZXh0YXJlYS5zdHlsZS5mb250RmFtaWx5ID0gIidTaGFyZSBUZWNoIE1vbm8nLCBtb25vc3BhY2UiOw0KICAgICAgdGV4dGFyZWEuc3R5bGUub3ZlcmZsb3cgPSAnc2Nyb2xsJzsNCiAgICAgIHRleHRhcmVhLnN0eWxlLndoaXRlU3BhY2UgPSAnbm93cmFwJzsNCiAgICAgIHRleHRhcmVhLnN0eWxlLnJlc2l6ZSA9ICdub25lJzsNCiAgICAgIHRleHRhcmVhLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoLTUwJSwgLTUwJSknOw0KICAgICAgdGV4dGFyZWEuY2hhbmdlZCA9IGZhbHNlOw0KICAgICAgdGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7DQogICAgICAgIHRleHRhcmVhLmNoYW5nZWQgPSB0cnVlOw0KICAgICAgfSk7DQogICAgICBTY3JhdGNoLnJlbmRlcmVyLmFkZE92ZXJsYXkodGV4dGFyZWEpOw0KICAgICAgdGhpcy5pbnB1dHNbSURdID0gdGV4dGFyZWE7DQogICAgfQ0KDQogICAgZ2V0SW5wdXRWYWx1ZSh7IElEIH0pIHsNCiAgICAgIElEID0gQ2FzdC50b1N0cmluZyhJRCk7DQogICAgICByZXR1cm4gdGhpcy5pbnB1dHNbSURdID8gdGhpcy5pbnB1dHNbSURdLnZhbHVlIDogJyc7DQogICAgfQ0KDQogICAgc2V0SW5wdXRWYWx1ZSh7IElELCBWQUxVRSB9KSB7DQogICAgICBJRCA9IENhc3QudG9TdHJpbmcoSUQpOw0KICAgICAgaWYgKHRoaXMuaW5wdXRzW0lEXSkgew0KICAgICAgICBWQUxVRSA9IENhc3QudG9TdHJpbmcoVkFMVUUpOw0KICAgICAgICB0aGlzLmlucHV0c1tJRF0udmFsdWUgPSBWQUxVRTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBzZXRJbnB1dFN0eWxlKHsgSUQsIFNUWUxFLCBWQUxVRSB9KSB7DQogICAgICBJRCA9IENhc3QudG9TdHJpbmcoSUQpOw0KICAgICAgaWYgKHRoaXMuaW5wdXRzW0lEXSkgew0KICAgICAgICBTVFlMRSA9IENhc3QudG9TdHJpbmcoU1RZTEUpOw0KICAgICAgICBWQUxVRSA9IENhc3QudG9TdHJpbmcoVkFMVUUpOw0KICAgICAgICB0aGlzLmlucHV0c1tJRF0uc3R5bGVbU1RZTEVdID0gVkFMVUU7DQogICAgICB9DQogICAgfQ0KDQogICAgc2V0SW5wdXRTdHlsZVN0YXJ0KHsgSUQsIFNUWUxFLCBWQUxVRSB9KSB7DQogICAgICBJRCA9IENhc3QudG9TdHJpbmcoSUQpOw0KICAgICAgU1RZTEUgPSBDYXN0LnRvU3RyaW5nKFNUWUxFKTsNCiAgICAgIFZBTFVFID0gQ2FzdC50b1N0cmluZyhWQUxVRSk7DQogICAgICBmb3IgKGxldCBpbnB1dCBpbiB0aGlzLmlucHV0cykgew0KICAgICAgICBpZiAoaW5wdXQuc3RhcnRzV2l0aChJRCkpIHsNCiAgICAgICAgICB0aGlzLmlucHV0c1tpbnB1dF0uc3R5bGVbU1RZTEVdID0gVkFMVUU7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICBpbnB1dEV4aXN0cyh7IElEIH0pIHsNCiAgICAgIElEID0gQ2FzdC50b1N0cmluZyhJRCk7DQogICAgICByZXR1cm4gISF0aGlzLmlucHV0c1tJRF07DQogICAgfQ0KDQogICAgZ2V0SW5wdXRMaW5lcyh7IElEIH0pIHsNCiAgICAgIElEID0gQ2FzdC50b1N0cmluZyhJRCk7DQogICAgICBpZiAodGhpcy5pbnB1dHNbSURdKSB7DQogICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLmlucHV0c1tJRF0udmFsdWUuc3BsaXQoJ1xuJykpOw0KICAgICAgfQ0KICAgICAgcmV0dXJuICdbXSc7DQogICAgfQ0KDQogICAgc2V0TGlzdFRvSW5wdXRMaW5lcyh7IElELCBMSVNUIH0sIHV0aWwpIHsNCiAgICAgIElEID0gQ2FzdC50b1N0cmluZyhJRCk7DQogICAgICBMSVNUID0gQ2FzdC50b1N0cmluZyhMSVNUKTsNCiAgICAgIGlmICh0aGlzLmlucHV0c1tJRF0pIHsNCiAgICAgICAgbGV0IGxpc3QgPSB1dGlsLnRhcmdldC5sb29rdXBWYXJpYWJsZUJ5SWQoTElTVCk7DQogICAgICAgIGlmIChsaXN0LnR5cGUgIT09ICdsaXN0JyB8fCAhbGlzdCkgew0KICAgICAgICAgIGxpc3QgPSB1dGlsLnRhcmdldC5sb29rdXBWYXJpYWJsZUJ5TmFtZUFuZFR5cGUoTElTVCwgImxpc3QiKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAobGlzdCkgew0KICAgICAgICAgIGxpc3QudmFsdWUgPSB0aGlzLmlucHV0c1tJRF0udmFsdWUuc3BsaXQoJ1xuJyk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICBpbnB1dENoYW5nZWQoeyBJRCB9KSB7DQogICAgICBJRCA9IENhc3QudG9TdHJpbmcoSUQpOw0KICAgICAgaWYgKHRoaXMuaW5wdXRzW0lEXSkgew0KICAgICAgICBsZXQgY2hhbmdlZCA9IHRoaXMuaW5wdXRzW0lEXS5jaGFuZ2VkOw0KICAgICAgICB0aGlzLmlucHV0c1tJRF0uY2hhbmdlZCA9IGZhbHNlOw0KICAgICAgICByZXR1cm4gY2hhbmdlZDsNCiAgICAgIH0NCiAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICByZXNldElucHV0Q2hhbmdlZCh7IElEIH0pIHsNCiAgICAgIElEID0gQ2FzdC50b1N0cmluZyhJRCk7DQogICAgICBpZiAodGhpcy5pbnB1dHNbSURdKSB7DQogICAgICAgIHRoaXMuaW5wdXRzW0lEXS5jaGFuZ2VkID0gZmFsc2U7DQogICAgICB9DQogICAgfQ0KDQogICAgbW92ZUlucHV0KHsgSUQsIFgsIFkgfSkgew0KICAgICAgSUQgPSBDYXN0LnRvU3RyaW5nKElEKTsNCiAgICAgIGlmICh0aGlzLmlucHV0c1tJRF0pIHsNCiAgICAgICAgWCA9IENhc3QudG9OdW1iZXIoWCkgKyAocnVudGltZS5zdGFnZVdpZHRoIC8gMik7DQogICAgICAgIFkgPSAoQ2FzdC50b051bWJlcihZKSAqIC0xKSArIChydW50aW1lLnN0YWdlSGVpZ2h0IC8gMik7DQogICAgICAgIHRoaXMuaW5wdXRzW0lEXS5zdHlsZS5sZWZ0ID0gWCArICdweCc7DQogICAgICAgIHRoaXMuaW5wdXRzW0lEXS5zdHlsZS50b3AgPSBZICsgJ3B4JzsNCiAgICAgIH0NCiAgICB9DQoNCiAgICByZXNpemVJbnB1dCh7IElELCBXSURUSCwgSEVJR0hUIH0pIHsNCiAgICAgIElEID0gQ2FzdC50b1N0cmluZyhJRCk7DQogICAgICBpZiAodGhpcy5pbnB1dHNbSURdKSB7DQogICAgICAgIFdJRFRIID0gQ2FzdC50b051bWJlcihXSURUSCk7DQogICAgICAgIEhFSUdIVCA9IENhc3QudG9OdW1iZXIoSEVJR0hUKTsNCiAgICAgICAgdGhpcy5pbnB1dHNbSURdLnN0eWxlLndpZHRoID0gV0lEVEggKyAncHgnOw0KICAgICAgICB0aGlzLmlucHV0c1tJRF0uc3R5bGUuaGVpZ2h0ID0gSEVJR0hUICsgJ3B4JzsNCiAgICAgIH0NCiAgICB9DQoNCiAgICByZW1vdmVBbGxJbnB1dHNJZFN0YXJ0KHsgSUQgfSkgew0KICAgICAgSUQgPSBDYXN0LnRvU3RyaW5nKElEKTsNCiAgICAgIGZvciAobGV0IGlucHV0IGluIHRoaXMuaW5wdXRzKSB7DQogICAgICAgIGlmIChpbnB1dC5zdGFydHNXaXRoKElEKSkgew0KICAgICAgICAgIFNjcmF0Y2gucmVuZGVyZXIucmVtb3ZlT3ZlcmxheSh0aGlzLmlucHV0c1tpbnB1dF0pOw0KICAgICAgICAgIGRlbGV0ZSB0aGlzLmlucHV0c1tpbnB1dF07DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICBsaXN0SW5wdXRzKCkgew0KICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KE9iamVjdC5rZXlzKHRoaXMuaW5wdXRzKSk7DQogICAgfQ0KDQogICAgZ2V0U2VsZWN0aW9uRGF0YSh7IElEIH0pIHsNCiAgICAgIElEID0gQ2FzdC50b1N0cmluZyhJRCk7DQogICAgICBpZiAoIXRoaXMuaW5wdXRzW0lEXSkgcmV0dXJuICIiOw0KICAgICAgcmV0dXJuIHRoaXMuZ2V0VGV4dCh0aGlzLmlucHV0c1tJRF0pOw0KICAgIH0NCg0KICAgIGdldFNlbGVjdGlvblBvc2l0aW9uKHsgSUQgfSkgew0KICAgICAgSUQgPSBDYXN0LnRvU3RyaW5nKElEKTsNCiAgICAgIGxldCBlbGVtID0gdGhpcy5pbnB1dHNbSURdOw0KICAgICAgaWYgKCFlbGVtKSByZXR1cm4gIlswLDBdIjsNCiAgICAgIGlmIChlbGVtLnRhZ05hbWUgPT09ICJURVhUQVJFQSIgfHwgKGVsZW0udGFnTmFtZSA9PT0gIklOUFVUIiAmJiBlbGVtLnR5cGUgPT09ICJ0ZXh0IikpIHsNCiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KFtlbGVtLnNlbGVjdGlvblN0YXJ0ICsgMSwgZWxlbS5zZWxlY3Rpb25FbmQgKyAxXSk7DQogICAgICB9DQogICAgICByZXR1cm4gIlswLDBdIjsNCiAgICB9DQoNCiAgICBzZXRTZWxlY3Rpb25SYW5nZSh7IElELCBTVEFSVCwgRU5EIH0pIHsNCiAgICAgIElEID0gQ2FzdC50b1N0cmluZyhJRCk7DQogICAgICBpZiAodGhpcy5pbnB1dHNbSURdKSB7DQogICAgICAgIFNUQVJUID0gQ2FzdC50b051bWJlcihTVEFSVCk7DQogICAgICAgIEVORCA9IENhc3QudG9OdW1iZXIoRU5EKTsNCiAgICAgICAgdGhpcy5pbnB1dHNbSURdLnNldFNlbGVjdGlvblJhbmdlKFNUQVJULCBFTkQpOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIGdldEN1cnNvckxpbmUoeyBTRUxFQ1RJT04sIElEIH0pIHsNCiAgICAgIElEID0gQ2FzdC50b1N0cmluZyhJRCk7DQogICAgICBsZXQgZWxlbSA9IHRoaXMuaW5wdXRzW0lEXTsNCiAgICAgIGlmICghZWxlbSkgcmV0dXJuIDA7DQogICAgICBpZiAoZWxlbS50YWdOYW1lID09PSAiVEVYVEFSRUEiIHx8IChlbGVtLnRhZ05hbWUgPT09ICJJTlBVVCIgJiYgZWxlbS50eXBlID09PSAidGV4dCIpKSB7DQogICAgICAgIGxldCBwb3MgPSBDYXN0LnRvU3RyaW5nKFNFTEVDVElPTikgPT09ICJFbmQiID8gZWxlbS5zZWxlY3Rpb25FbmQgOiBlbGVtLnNlbGVjdGlvblN0YXJ0Ow0KICAgICAgICBsZXQgdGV4dCA9IGVsZW0udmFsdWUuc3Vic3RyaW5nKDAsIHBvcyk7DQogICAgICAgIGxldCBsaW5lcyA9IHRleHQuc3BsaXQoIlxuIik7DQogICAgICAgIHJldHVybiBsaW5lcy5sZW5ndGg7DQogICAgICB9DQogICAgICByZXR1cm4gMDsNCiAgICB9DQoNCiAgICBnZXRDdXJzb3JDb2x1bW4oeyBTRUxFQ1RJT04sIElEIH0pIHsNCiAgICAgIElEID0gQ2FzdC50b1N0cmluZyhJRCk7DQogICAgICBsZXQgZWxlbSA9IHRoaXMuaW5wdXRzW0lEXTsNCiAgICAgIGlmICghZWxlbSkgcmV0dXJuIDA7DQogICAgICBpZiAoZWxlbS50YWdOYW1lID09PSAiVEVYVEFSRUEiIHx8IChlbGVtLnRhZ05hbWUgPT09ICJJTlBVVCIgJiYgZWxlbS50eXBlID09PSAidGV4dCIpKSB7DQogICAgICAgIGxldCBwb3MgPSBDYXN0LnRvU3RyaW5nKFNFTEVDVElPTikgPT09ICJFbmQiID8gZWxlbS5zZWxlY3Rpb25FbmQgOiBlbGVtLnNlbGVjdGlvblN0YXJ0Ow0KICAgICAgICBsZXQgdGV4dCA9IGVsZW0udmFsdWUuc3Vic3RyaW5nKDAsIHBvcyk7DQogICAgICAgIGxldCBsaW5lcyA9IHRleHQuc3BsaXQoIlxuIik7DQogICAgICAgIHJldHVybiBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXS5sZW5ndGggKyAxOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIDA7DQogICAgfQ0KDQogICAgaW5wdXRTZXR0aW5nKFNFVFRJTkcsSUQpIHsNCiAgICAgIHN3aXRjaCAoU0VUVElORykgew0KICAgICAgICBjYXNlICJGb2N1cyI6DQogICAgICAgICAgdGhpcy5pbnB1dHNbSURdLmZvY3VzKCk7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgIkRlbGV0ZSI6DQogICAgICAgICAgU2NyYXRjaC5yZW5kZXJlci5yZW1vdmVPdmVybGF5KHRoaXMuaW5wdXRzW0lEXSk7DQogICAgICAgICAgZGVsZXRlIHRoaXMuaW5wdXRzW0lEXTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAiRGlzYWJsZSI6DQogICAgICAgICAgdGhpcy5pbnB1dHNbSURdLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgIkVuYWJsZSI6DQogICAgICAgICAgdGhpcy5pbnB1dHNbSURdLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgIkhpZGUiOg0KICAgICAgICAgIHRoaXMuaW5wdXRzW0lEXS5zdHlsZS5vcGFjaXR5ID0gJzAnOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlICJTaG93IjoNCiAgICAgICAgICB0aGlzLmlucHV0c1tJRF0uc3R5bGUub3BhY2l0eSA9ICcxJzsNCiAgICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBzZXRJbnB1dFNldHRpbmcoeyBTRVRUSU5HLCBJRCB9KSB7DQogICAgICBJRCA9IENhc3QudG9TdHJpbmcoSUQpOw0KICAgICAgaWYgKHRoaXMuaW5wdXRzW0lEXSkgew0KICAgICAgICBTRVRUSU5HID0gQ2FzdC50b1N0cmluZyhTRVRUSU5HKTsNCiAgICAgICAgdGhpcy5pbnB1dFNldHRpbmcoU0VUVElORyxJRCk7DQogICAgICB9DQogICAgfQ0KDQogICAgc2V0SW5wdXRTZXR0aW5nT25BbGxTdGFydCh7IFNFVFRJTkcsIElEIH0pIHsNCiAgICAgIElEID0gQ2FzdC50b1N0cmluZyhJRCk7DQogICAgICBTRVRUSU5HID0gQ2FzdC50b1N0cmluZyhTRVRUSU5HKTsNCiAgICAgIGZvciAobGV0IGlucHV0IGluIHRoaXMuaW5wdXRzKSB7DQogICAgICAgIGlmIChpbnB1dC5zdGFydHNXaXRoKElEKSkgew0KICAgICAgICAgIHRoaXMuaW5wdXRTZXR0aW5nKFNFVFRJTkcsaW5wdXQpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgcmVtb3ZlQWxsSW5wdXRzKCkgew0KICAgICAgZm9yIChsZXQgaW5wdXQgaW4gdGhpcy5pbnB1dHMpIHsNCiAgICAgICAgU2NyYXRjaC5yZW5kZXJlci5yZW1vdmVPdmVybGF5KHRoaXMuaW5wdXRzW2lucHV0XSk7DQogICAgICAgIGRlbGV0ZSB0aGlzLmlucHV0c1tpbnB1dF07DQogICAgICB9DQogICAgfQ0KDQogICAgZ2V0U2Nyb2xsUG9zaXRpb24oeyBJRCB9KSB7DQogICAgICBJRCA9IENhc3QudG9TdHJpbmcoSUQpOw0KICAgICAgcmV0dXJuIHRoaXMuaW5wdXRzW0lEXSA/IEpTT04uc3RyaW5naWZ5KFt0aGlzLmlucHV0c1tJRF0uc2Nyb2xsTGVmdCwgdGhpcy5pbnB1dHNbSURdLnNjcm9sbFRvcF0pIDogIlswLDBdIjsNCiAgICB9DQoNCiAgICBtYXhTY3JvbGxQb3NpdGlvbih7IElEIH0pIHsNCiAgICAgIElEID0gQ2FzdC50b1N0cmluZyhJRCk7DQogICAgICByZXR1cm4gdGhpcy5pbnB1dHNbSURdID8gSlNPTi5zdHJpbmdpZnkoW3RoaXMuaW5wdXRzW0lEXS5zY3JvbGxXaWR0aCwgdGhpcy5pbnB1dHNbSURdLnNjcm9sbEhlaWdodF0pIDogIlswLDBdIjsNCiAgICB9DQoNCiAgICBnZXRBdHRyaWJ1dGUoeyBJRCwgQVRUUiB9KSB7DQogICAgICBJRCA9IENhc3QudG9TdHJpbmcoSUQpOw0KICAgICAgQVRUUiA9IENhc3QudG9TdHJpbmcoQVRUUik7DQogICAgICByZXR1cm4gdGhpcy5pbnB1dHNbSURdID8gdGhpcy5pbnB1dHNbSURdW0FUVFJdIDogJyc7DQogICAgfQ0KDQogICAgc2V0QXR0cmlidXRlKHsgSUQsIEFUVFIsIFZBTFVFIH0pIHsNCiAgICAgIElEID0gQ2FzdC50b1N0cmluZyhJRCk7DQogICAgICBpZiAodGhpcy5pbnB1dHNbSURdKSB7DQogICAgICAgIEFUVFIgPSBDYXN0LnRvU3RyaW5nKEFUVFIpOw0KICAgICAgICB0aGlzLmlucHV0c1tJRF1bQVRUUl0gPSBWQUxVRTsNCiAgICAgIH0NCiAgICB9DQogIH0NCg0KICBTY3JhdGNoLmV4dGVuc2lvbnMucmVnaXN0ZXIobmV3IGh0bWxJbnB1dHMoKSk7DQp9KShTY3JhdGNoKTs=","MouseCursor":"https://extensions.turbowarp.org/cursor.js","truefantomnetwork":"https://extensions.turbowarp.org/true-fantom/network.js"},"customFonts":[{"system":false,"family":"SFPRODISPLAYREGULAR","fallback":"Sans Serif","md5ext":"aaeac71d99a345145a126a8c9dd2615f.ttf"}],"meta":{"semver":"3.0.0","platform":{"name":"TurboWarp","url":"https://turbowarp.org/"}}}