<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
    <meta name="color-scheme" content="dark">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="manifest" href="/manifest.json">
	<script src="/src/script.js"></script>
	<title>integration twitch</title>
</head>
<body style="overflow:hidden;">
	<style>
		:root {background-color: #101010;}
		body {margin: 0;}
		iframe {
			display: block;
			background: #000;
			border: none;
			height: 100vh;
			width: 100vw;
		}
	</style>
	<iframe id="ift" src="about:blank" scrolling="no" allowfullscreen></iframe>
    <script>
		function ce(){
			it=document.createElement('h1');
			it.innerHTML='Error please see the console';
            it.style.fontFamily="Consolas, monospace";
			document.body.append(it);
            document.getElementById('ift').style.display='none';
			throw new Error("The channel is not specified, Use ?channel=:channel");
		}
		const hn=window.location.hostname;		
		const qsp=new URLSearchParams(window.location.search);
	
		const c=qsp.get("channel")==""||!qsp.has("channel")?ce():qsp.get("channel");
		const a=qsp.get("autoplay")==null?false:qsp.get("autoplay");
		const m=qsp.get("muted")==null?true:qsp.get("muted");
	
		console.debug("channel = "+c);
		console.debug("autoplay = "+a);
		console.debug("muted = "+m);
	
		const l=`https://player.twitch.tv/?channel=${c}&parent=${hn}&autoplay=${a}&muted=${m}`;
		console.debug(l);
		document.getElementById('ift').src=l;
		window.resizeTo(1300,777);
		document.title=`integration twitch - ${c}`;
	</script>
</body>
</html>
